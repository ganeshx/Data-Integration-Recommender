!function(e){var o={};function t(r){if(o[r])return o[r].exports;var n=o[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=e,t.c=o,t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,o){if(1&o&&(e=t(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var n in e)t.d(r,n,function(o){return e[o]}.bind(null,n));return r},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.p="",t(t.s=0)}([function(e,o,t){"use strict";const r=document.getElementById("mynetwork"),n={nodes:{shadow:{enabled:!0,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5}},layout:{hierarchical:{enabled:!0,nodeSpacing:180,sortMethod:"directed"}},physics:!1,interaction:{hover:!0},edges:{color:{color:"rgb(211, 211, 211, 0.1)",highlight:"blue",hover:"rgb(35, 120, 249, 1)",inherit:"from",opacity:1}},width:"1800px"};let i=[],l=[];fetch(window.location.origin+"/src/sample.json").then(e=>e.json()).then(e=>{u(e)}),$("form").submit((function(e){e.preventDefault(),$("#createModal").modal("toggle");let o=$("textarea#result").val();u(JSON.parse(o))}));const c=document.querySelector(".write-btn"),a=document.querySelector(".to-copy").firstChild;c.addEventListener("click",()=>{const e=a.data;e&&navigator.clipboard.writeText(e).then(()=>{if("Copied!"!==c.innerText){const e=c.innerText;c.innerText="Copied!",setTimeout(()=>{c.innerText=e},1500)}}).catch(e=>{console.log("Something went wrong",e)})});const d=function(e){let o;return"ROLE"===e?o="rgb(255, 232, 232, 1)":"USER"===e&&(o="rgb(189, 243, 227, 1)"),o},u=function(e){let o=new vis.DataSet([]);e.forEach(e=>{if("ROLE"===e.SNOWFLAKE_OBJECT_TYPE&&"SECURITYADMIN"!==e.GRANTED_TO_NAME&&"OWNERSHIP"!==e.PRIVILEGE){try{o.add({id:e.GRANTED_TO_NAME,label:e.GRANTED_TO_NAME,shape:"box",color:{border:"rgb(211, 211, 211, 1)",background:d(e.GRANTED_TO_TYPE),highlight:{border:"rgb(211, 211, 211, 1)",background:"yellow"},hover:{border:"#2B7CE9",background:"lightblue"}},widthConstraint:{maximum:150},initialColor:d(e.GRANTED_TO_TYPE)})}catch(e){console.log(e)}try{o.add({id:e.OBJECT_NAME,label:e.OBJECT_NAME,shape:"box",color:{border:"rgb(211, 211, 211, 1)",background:d(e.SNOWFLAKE_OBJECT_TYPE),highlight:{border:"#2B7CE9",background:"yellow"},hover:{border:"#2B7CE9",background:"lightblue"}},widthConstraint:{maximum:150},initialColor:d(e.SNOWFLAKE_OBJECT_TYPE)})}catch(e){console.log(e)}}});let t=[];e.forEach(e=>{"SECURITYADMIN"!==e.GRANTED_TO_NAME&&"OWNERSHIP"!==e.PRIVILEGE&&t.push({from:e.GRANTED_TO_NAME,to:e.OBJECT_NAME,arrows:"to"})});let c=new vis.DataSet(t),a={nodes:o,edges:c},u=new vis.Network(r,a,n),g=function(e,t,r){if(e){let n=u.getConnectedEdges(e),i=c.get(n).filter(o=>o.from===e);i.map(e=>{e.color="blue"}),i.forEach(e=>{r.push(e)}),c.update(i);let l=u.getConnectedNodes(e,"to");l&&l.forEach(e=>{-1===t.indexOf(e)&&(t.push(e),o.update({id:e,color:{background:"rgb(113, 167, 247, 1)"}}),g(e,t,r))})}return[t,r]};u.on("select",(function(e){if(i.length>0){let e=o.get(i);e.forEach(e=>{e.color={border:"rgb(211, 211, 211, 1)",background:e.initialColor,highlight:{border:"#2B7CE9",background:"yellow"},hover:{border:"#2B7CE9",background:"lightblue"}}}),o.update(e)}l.length>0&&(l.forEach(e=>{e.color={color:"rgb(211, 211, 211, 0.1)",highlight:"blue",hover:"blue",inherit:"from",opacity:.5}}),c.update(l));const t=e.nodes[0],r=g(t,[],[]);i=r[0],l=r[1]})),window.onresize=function(){u.fit()}}}]);